# 一生足迹数据导入器 Web版

用最快的方式，将三方数据轨迹导入到「一生足迹」中的 Web 应用。

## 功能特性

- ✅ **多格式支持**：支持 GPX、KML、OVJSN（奥维互动地图）格式
- ✅ **批量处理**：支持同时处理多个文件
- ✅ **时间设置**：支持设置开始时间、结束时间和时间间隔
- ✅ **海拔高度控制**：支持自定义默认海拔
- ✅ **速度计算**：支持自动计算或手动指定速度
- ✅ **轨迹插点**：支持轨迹插点功能，使轨迹更平滑
- ✅ **现代化 UI**：基于 Ant Design 的精美界面，支持白天/夜间模式切换
- ✅ **视觉特效**：渐变背景、动画效果、玻璃态设计
- ✅ **卡片化布局**：上下堆叠卡片布局，标题卡片化设计
- ✅ **完全本地处理**：所有数据在浏览器中处理，无需上传到服务器

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

应用将在 `http://localhost:5173` 启动。

### 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist` 目录。

### 预览生产版本

```bash
npm run preview
```

## 界面特性

- **步骤引导**：清晰的4步处理流程指示
- **上下卡片布局**：垂直堆叠卡片设计，视觉层次分明
- **标题卡片化**：应用标题采用渐变卡片设计
- **响应式布局**：完美适配桌面和移动设备
- **现代化UI**：基于 Ant Design 的企业级界面设计
- **深色模式**：智能主题切换，支持护眼模式
- **渐变美化**：动态背景渐变和视觉特效
- **动画过渡**：流畅的交互反馈和状态变化

## 使用说明

### 操作流程

应用采用上下卡片布局设计，按以下步骤进行操作：

1. **📁 文件选择卡片** - 上传 GPX/KML/OVJSN 格式的文件
2. **⚙️ 参数设置卡片** - 配置时间、海拔、速度等处理参数
3. **▶️ 处理控制卡片** - 点击处理按钮转换文件
4. **💾 结果展示卡片** - 查看并下载生成的 CSV 文件

### 文件上传

- **拖拽上传**：支持拖拽文件到上传区域
- **格式支持**：GPX、KML、OVJSN 格式
- **批量处理**：可同时上传多个文件

### 参数配置

#### 时间设置
- **开始时间**：轨迹起始时间（格式：`2024-01-01 08:00:00`）
- **结束时间**：轨迹结束时间（可选）
- **时间间隔**：轨迹点时间间隔（秒，支持负数反转）

**时间分配规则**：
1. 设置结束时间 → 均匀分配时间戳
2. 设置时间间隔 → 按间隔分配时间
3. 默认 → 统一使用开始时间

#### 海拔与速度
- **默认海拔**：轨迹点海拔高度（米）
- **速度模式**：自动计算或手动指定（m/s）

#### 轨迹优化
- **插点功能**：自动插入轨迹补点
- **距离阈值**：设置插点触发距离（米）

### 处理与下载

点击"开始处理"后系统将：
1. 解析并验证文件格式
2. 应用配置的参数设置
3. 生成标准的 CSV 文件
4. 提供批量下载功能

**输出格式**：`原文件名_steplife.csv`

### 4. 主题切换

应用支持白天和夜间模式切换：
- 点击界面右上角的 🌙/☀️ 按钮切换主题
- 主题设置会自动保存到浏览器本地存储

#### 视觉特性

- **渐变背景**：动态渐变色彩，营造现代感
- **玻璃态效果**：毛玻璃背景，现代UI设计
- **动画过渡**：流畅的主题切换和悬停效果
- **响应式设计**：完美适配桌面和移动设备
- **无障碍支持**：支持高对比度和减少动画偏好

#### 深色模式特色

- 护眼的深色配色方案
- 智能的色彩适应算法
- 保持良好的对比度和可读性

## 技术栈

- **React 19** - UI 框架
- **Ant Design 5.x** - 企业级 UI 组件库
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **原生 DOM API** - XML/JSON 解析

## 项目结构

```
steplife-importer-webui/
├── src/
│   ├── components/          # React 组件
│   │   ├── FileUpload.tsx   # 文件上传组件 (Ant Design Upload)
│   │   ├── ConfigPanel.tsx  # 参数配置组件 (Ant Design Form)
│   │   ├── StatusPanel.tsx  # 状态显示组件 (Ant Design Progress/Card)
│   │   └── FileProcessList.tsx # 文件处理列表 (Ant Design Table/List)
│   ├── parsers/             # 文件解析器
│   │   ├── gpx.ts           # GPX 格式解析
│   │   ├── kml.ts           # KML 格式解析
│   │   └── ovjsn.ts         # OVJSN 格式解析
│   ├── utils/               # 工具函数
│   │   ├── fileParser.ts    # 文件解析入口
│   │   ├── processor.ts     # 轨迹处理逻辑
│   │   ├── pointcalc.ts     # 插点计算
│   │   └── csv.ts           # CSV 生成和下载
│   ├── types.ts             # TypeScript 类型定义
│   ├── App.tsx              # 主应用组件
│   ├── main.tsx             # 应用入口
│   └── App.css              # 样式文件
├── index.html               # HTML 模板
├── package.json             # 项目配置
├── tsconfig.json            # TypeScript 配置
└── vite.config.ts           # Vite 配置
```

## 浏览器兼容性

- Chrome/Edge (最新版本)
- Firefox (最新版本)
- Safari (最新版本)

## 注意事项

- 所有数据处理都在浏览器本地完成，不会上传到任何服务器
- 大文件处理可能需要一些时间，请耐心等待
- 建议在处理前先备份原始文件

## 许可证

本项目基于原 Go 版本项目开发，遵循相同的许可证。

## 致谢

- 感谢 [hygao1024/steplife-universal-importer](https://github.com/hygao1024/steplife-universal-importer) 原作者的贡献
- 感谢 [Kearney3/steplife-universal-importer-gui](https://github.com/Kearney3/steplife-universal-importer-gui) GUI 版本的参考

